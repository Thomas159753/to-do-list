/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(t){return"function"==typeof t}function a(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(t,e){return null!=t&&"object"==typeof t&&e in t}var r=RegExp.prototype.test,i=/\S/;var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},c=/\s*/,l=/\s+/,d=/\s*=/,p=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/;function u(t){this.string=t,this.tail=t,this.pos=0}function f(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function g(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},u.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},f.prototype.push=function(t){return new f(t,this)},f.prototype.lookup=function(t){var e,a,r,i=this.cache;if(i.hasOwnProperty(t))e=i[t];else{for(var o,c,l,d=this,p=!1;d;){if(t.indexOf(".")>0)for(o=d.view,c=t.split("."),l=0;null!=o&&l<c.length;)l===c.length-1&&(p=s(o,c[l])||(a=o,r=c[l],null!=a&&"object"!=typeof a&&a.hasOwnProperty&&a.hasOwnProperty(r))),o=o[c[l++]];else o=d.view[t],p=s(d.view,t);if(p){e=o;break}d=d.parent}i[t]=e}return n(e)&&(e=e.call(this.view)),e},g.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},g.prototype.parse=function(t,n){var s=this.templateCache,o=t+":"+(n||k.tags).join(":"),f=void 0!==s,g=f?s.get(o):void 0;return null==g&&(g=function(t,n){if(!t)return[];var s,o,f,g,v=!1,m=[],y=[],w=[],x=!1,T=!1,$="",b=0;function C(){if(x&&!T)for(;w.length;)delete y[w.pop()];else w=[];x=!1,T=!1}function I(t){if("string"==typeof t&&(t=t.split(l,2)),!e(t)||2!==t.length)throw new Error("Invalid tags: "+t);s=new RegExp(a(t[0])+"\\s*"),o=new RegExp("\\s*"+a(t[1])),f=new RegExp("\\s*"+a("}"+t[1]))}I(n||k.tags);for(var j,_,U,E,P,S,D=new u(t);!D.eos();){if(j=D.pos,U=D.scanUntil(s))for(var V=0,O=U.length;V<O;++V)g=E=U.charAt(V),function(t,e){return r.call(t,e)}(i,g)?(T=!0,v=!0,$+=" "):(w.push(y.length),$+=E),y.push(["text",E,j,j+1]),j+=1,"\n"===E&&(C(),$="",b=0,v=!1);if(!D.scan(s))break;if(x=!0,_=D.scan(h)||"name",D.scan(c),"="===_?(U=D.scanUntil(d),D.scan(d),D.scanUntil(o)):"{"===_?(U=D.scanUntil(f),D.scan(p),D.scanUntil(o),_="&"):U=D.scanUntil(o),!D.scan(o))throw new Error("Unclosed tag at "+D.pos);if(P=">"==_?[_,U,j,D.pos,$,b,v]:[_,U,j,D.pos],b++,y.push(P),"#"===_||"^"===_)m.push(P);else if("/"===_){if(!(S=m.pop()))throw new Error('Unopened section "'+U+'" at '+j);if(S[1]!==U)throw new Error('Unclosed section "'+S[1]+'" at '+j)}else"name"===_||"{"===_||"&"===_?T=!0:"="===_&&I(U)}if(C(),S=m.pop())throw new Error('Unclosed section "'+S[1]+'" at '+D.pos);return function(t){for(var e,n=[],a=n,s=[],r=0,i=t.length;r<i;++r)switch((e=t[r])[0]){case"#":case"^":a.push(e),s.push(e),a=e[4]=[];break;case"/":s.pop()[5]=e[2],a=s.length>0?s[s.length-1][4]:n;break;default:a.push(e)}return n}(function(t){for(var e,n,a=[],s=0,r=t.length;s<r;++s)(e=t[s])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(a.push(e),n=e));return a}(y))}(t,n),f&&s.set(o,g)),g},g.prototype.render=function(t,e,n,a){var s=this.getConfigTags(a),r=this.parse(t,s),i=e instanceof f?e:new f(e,void 0);return this.renderTokens(r,i,n,t,a)},g.prototype.renderTokens=function(t,e,n,a,s){for(var r,i,o,c="",l=0,d=t.length;l<d;++l)o=void 0,"#"===(i=(r=t[l])[0])?o=this.renderSection(r,e,n,a,s):"^"===i?o=this.renderInverted(r,e,n,a,s):">"===i?o=this.renderPartial(r,e,n,s):"&"===i?o=this.unescapedValue(r,e):"name"===i?o=this.escapedValue(r,e,s):"text"===i&&(o=this.rawValue(r)),void 0!==o&&(c+=o);return c},g.prototype.renderSection=function(t,a,s,r,i){var o=this,c="",l=a.lookup(t[1]);if(l){if(e(l))for(var d=0,p=l.length;d<p;++d)c+=this.renderTokens(t[4],a.push(l[d]),s,r,i);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)c+=this.renderTokens(t[4],a.push(l),s,r,i);else if(n(l)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(a.view,r.slice(t[3],t[5]),(function(t){return o.render(t,a,s,i)})))&&(c+=l)}else c+=this.renderTokens(t[4],a,s,r,i);return c}},g.prototype.renderInverted=function(t,n,a,s,r){var i=n.lookup(t[1]);if(!i||e(i)&&0===i.length)return this.renderTokens(t[4],n,a,s,r)},g.prototype.indentPartial=function(t,e,n){for(var a=e.replace(/[^ \t]/g,""),s=t.split("\n"),r=0;r<s.length;r++)s[r].length&&(r>0||!n)&&(s[r]=a+s[r]);return s.join("\n")},g.prototype.renderPartial=function(t,e,a,s){if(a){var r=this.getConfigTags(s),i=n(a)?a(t[1]):a[t[1]];if(null!=i){var o=t[6],c=t[5],l=t[4],d=i;0==c&&l&&(d=this.indentPartial(i,l,o));var p=this.parse(d,r);return this.renderTokens(p,e,a,d,s)}}},g.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},g.prototype.escapedValue=function(t,e,n){var a=this.getConfigEscape(n)||k.escape,s=e.lookup(t[1]);if(null!=s)return"number"==typeof s&&a===k.escape?String(s):a(s)},g.prototype.rawValue=function(t){return t[1]},g.prototype.getConfigTags=function(t){return e(t)?t:t&&"object"==typeof t?t.tags:void 0},g.prototype.getConfigEscape=function(t){return t&&"object"==typeof t&&!e(t)?t.escape:void 0};var k={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){v.templateCache=t},get templateCache(){return v.templateCache}},v=new g;k.clearCache=function(){return v.clearCache()},k.parse=function(t,e){return v.parse(t,e)},k.render=function(t,n,a,s){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(e(r=t)?"array":typeof r)+'" was given as the first argument for mustache#render(template, view, partials)');var r;return v.render(t,n,a,s)},k.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return o[t]}))},k.Scanner=u,k.Context=f,k.Writer=g;const m=k,y=function(t,e,n){const a=$(t),s=$(e);"none"===a.css("display")&&"flex"===s.css("display")&&!1===n?(a.css("display","flex"),s.css("display","none")):!0===n?s.css("display","none"):(a.css("display","none"),s.css("display","flex"))},w=function(t,e,n){const a=new Date;return t.reduce(((t,s)=>{let r=[];return"today"===e?r=s.tasks.filter((t=>new Date(t.date).toLocaleDateString()===a.toLocaleDateString())):"upcoming"===e?r=s.tasks.filter((t=>new Date(t.date)>a)):"all"===e?r=[...s.tasks]:"search"===e&&(r=s.tasks.filter((t=>t.name===n))),[...t,...r]}),[])};!function(){const t=$(".nav-bar"),e=t.find("#new_project"),n=t.find("#inbox"),a=t.find("#today"),s=t.find("#upcoming"),r=t.find("#search"),i=t.find("#project_form"),o=i.find("#project_input"),c=i.find(".btn_add_project"),l=(i.find("#btn_cancel_project"),t.find("ul")),d=$(".tasks-preview"),p=d.find(".add-task-show"),h=d.find(".task-input-div"),u=d.find("#task_input"),f=d.find(".btn_add_task"),g=d.find("#tasks-list"),k=d.find(".task-header");let v=[],x=0,T=null;const b=t=>{const e=$(t.currentTarget).closest(".item").data("index"),n=$(t.currentTarget).closest(".item");if($(t.currentTarget).hasClass("project-li"))T=v.find((t=>t.dataIndex==e)),j(T,"task");else if($(t.currentTarget).hasClass("fa-circle")||$(t.currentTarget).hasClass("fa-check-circle")||$(t.currentTarget).hasClass("date")){let n,a;if($(t.currentTarget).hasClass("fa-circle")||$(t.currentTarget).hasClass("date")?(n=T.tasks.findIndex((t=>t.dataIndex===e)),a=T.tasks.find((t=>t.dataIndex===e))):(n=T.completedTasks.findIndex((t=>t.dataIndex===e)),a=T.completedTasks.find((t=>t.dataIndex===e))),a)if($(t.currentTarget).hasClass("date")){const e=$(t.currentTarget).val();T.addDate(a,e)}else T.completeTask(n,a),j(T,"task")}else if($(t.currentTarget).hasClass("fa-trash-can")){const t=v.find((t=>t.dataIndex==e));I(t,e,n)}},C=()=>{const t=new class{constructor(t,e){this.name=t,this.tasks=[],this.completedTasks=[],this.dataIndex=e,this.cacheDom()}cacheDom(){this.$nav=$(".nav-bar"),this.$projectModule=this.$nav.find("#projectModule"),this.$ul=this.$projectModule.find("ul"),this.$tasksPreview=$(".tasks-preview"),this.$taskUl=this.$tasksPreview.find("#tasks-list")}render(t,e){const n='\n      <li class="item" data-index="{{dataIndex}}">\n        <span class="task_icon"><i class="fa-regular fa-circle"></i></span>\n        <span class="task_text">{{task}}</span>\n        <input class="date" type="date" id="dateInput" name="date" value="{{date}}">\n      </li>\n    ';"project"===t?this.$ul.append(m.render('\n    <li class="project-li item" data-index="{{dataIndex}}">\n        <span class="btn__icon"><i class="fa-solid fa-list"></i></span>\n        <span class="btn__text">{{name}}</span>\n        <span class="btn__icon"><i class="fa-regular fa-trash-can"></i></span>\n    </li>\n    ',{name:this.name,dataIndex:this.dataIndex})):"filter"===t?(this.$taskUl.empty(),e.forEach((t=>{this.$taskUl.append(m.render(n,{task:t.name,dataIndex:t.dataIndex,date:t.date||""}))}))):"task"===t&&(this.$taskUl.empty(),this.tasks.forEach((t=>{this.$taskUl.append(m.render(n,{task:t.name,dataIndex:t.dataIndex,date:t.date||""}))})),this.completedTasks.forEach((t=>{this.$taskUl.append(m.render('\n    <li class="item" data-index="{{dataIndex}}">\n      <span class="task_icon"><i class="fa-regular fa-check-circle"></i></span>\n      <span class="task_text">{{task}}</span>\n      <input class="date" type="date" id="dateInput" name="date" value="{{date}}">\n    </li>\n  ',{task:t.name,dataIndex:t.dataIndex,date:t.date||""}))})))}addProjectTask(t,e){this.tasks.push({name:t,completed:!1,dataIndex:e,date:null})}addDate(t,e){t.date=e.toString()}completeTask(t,e){if(!1===e.completed){const e=this.tasks.splice(t,1)[0];e.completed=!0,this.completedTasks.push(e)}else{const e=this.completedTasks.splice(t,1)[0];e.completed=!1,this.tasks.push(e)}}deleteProject(){this.tasks=[],this.completedTasks=[]}}(o.val(),x++);v.push(t),t.render("project"),o.val(""),y(i,e)},I=(t,e,n)=>{v=v.filter((t=>t.dataIndex!==e)),t.deleteProject(),n.remove(),j(t,"delete")},j=(t,e,n)=>{"delete"===e?(k.html(""),y(void 0,p,!0),g.empty(),t.render(e)):"filter"===e?(k.html(""),y(void 0,p,!0),g.empty(),t.render(e,n)):(k.html(t.name),f.off("click").on("click",(()=>(t=>{t.addProjectTask(u.val(),x++),u.val(""),j(t,"task")})(t))),y(h,p),t.render(e))};c.on("click",(()=>C())),a.on("click",(()=>j(T,"filter",w(v,"today")))),n.on("click",(()=>j(T,"filter",w(v,"all")))),s.on("click",(()=>j(T,"filter",w(v,"upcoming")))),r.on("input",(()=>{j(T,"filter",w(v,"search",r.val()))})),l.on("click","i.fa-trash-can",(t=>{t.stopPropagation(),b(t)})),l.on("click","li.project-li",(t=>{b(t)})),g.on("click","i.fa-circle, i.fa-check-circle",(t=>{b(t,t.currentTarget)})),g.on("change","input.date",(t=>{b(t,t.currentTarget)})),e.on("click",(()=>y(i,e,!1))),p.on("click",(()=>y(h,p,!1)))}()})();